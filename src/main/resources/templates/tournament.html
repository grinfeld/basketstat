<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>Results</title>
        <link rel="stylesheet" th:href="@{webjars/bootstrap/4.2.1/css/bootstrap.min.css}"/>
        <link rel="stylesheet" th:href="@{/css/main.css}"/>
        <script type="text/javascript" th:src="@{/js/query-3.3.1.js}"></script>
    </head>

    <body>
        <span th:replace="fragments/nav.html :: nav"></span>
        <main role="main" class="container">
            <div class="errorMsg" th:if="error != null" th:text="${error}"></div>
            <div class="successMsg" th:if="msg != null" th:text="${msg}"></div>
        </main>
        <div class="starter-template">
            <div>
                <span th:replace="fragments/tournselect.html :: tournamentsList"></span>
                <a href="#" onclick="createTourn()">Create New</a>
            </div>
            <div>
                <form action="#" th:action="@{/tournamentsave}" th:object="${tourn}" method="post">
                    <input id="tournName" type="text" th:field="*{tournName}" />
                    <input type="hidden" th:field="*{id}" />
                    <input type="submit" value="Save" />
                </form>
            </div>
        </div>

        <script type="application/javascript">
            $(document).ready(function() {
                var select = $("select[name=tournament]");
                select.change(function() {
                    var selected = $("select[name=tournament] option:selected");
                    $('#tournName').val(selected.val() !== "" ? selected.text().trim() : "");
                    $("input[name=id]").val(selected.val() !== "" ? selected.val().trim() : "");
                });
                var id = $("input[name=id]").val();
                select.val(id);
            });
            function createTourn() {
                $("select[name=tournament]").val("");
                $("input[name=id]").val("");
                $('#tournName').val("");
            }
        </script>
        <script type="text/javascript" th:src="@{webjars/bootstrap/4.2.1/js/bootstrap.min.js}"></script>
    </body>
</html>